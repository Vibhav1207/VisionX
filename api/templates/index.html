<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>VisionX Image Converter</title>
  <link rel="stylesheet" href="/static/style.css" />
</head>
<body>
  <div class="container">
    <h1>ðŸŽ¨ VisionX Image Converter</h1>
    <form id="uploadForm" action="/process/" enctype="multipart/form-data" method="post">
      <input type="file" name="file" id="fileInput" accept="image/*" required />
      <label for="operation">Choose Operation:</label>
      <select name="operation" required>
        <option value="sketch">Sketch</option>
        <option value="cartoon">Cartoon</option>
        <option value="color2bw">Color to B&W</option>
        <option value="bw2color">B&W to Fake Color</option>
      </select>
      <button type="submit">Convert</button>
    </form>
    <div id="output-area" style="display:none;">
  <h3>Output:</h3>
  <img id="output-img" style="max-width:400px;">
  <br>
  <a id="download-btn" href="#" download>Download</a>
</div>
    <p id="fileName">No file chosen</p>
    <p id="result"></p>
  </div>
  <script>
  const form = document.getElementById('upload-form');
  const outputArea = document.getElementById('output-area');
  const outputImg = document.getElementById('output-img');
  const downloadBtn = document.getElementById('download-btn');

  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    const formData = new FormData(form);
    const response = await fetch('/process/', {
      method: 'POST',
      body: formData
    });
    if (response.ok) {
      const blob = await response.blob();
      const imageURL = URL.createObjectURL(blob);
      outputImg.src = imageURL;
      downloadBtn.href = imageURL;
      outputArea.style.display = 'block';
    } else {
      alert('Error processing image.');
    }
  });
</script>
  <script>
    const fileInput = document.getElementById("fileInput");
    const fileName = document.getElementById("fileName");
    fileInput.addEventListener("change", () => {
      fileName.innerText = fileInput.files[0]?.name || "No file chosen";
    });
  </script>
</body>
</html>
