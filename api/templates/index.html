<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>VisionX Image Converter</title>
  <link rel="stylesheet" href="/static/style.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>
<body>
  <div class="container">
    <h1>ðŸŽ¨ VisionX Image Converter</h1>

    {% if error %}
      <p style="color: red;">{{ error }}</p>
    {% endif %}

    <form id="uploadForm" action="/process/" enctype="multipart/form-data" method="post">
      <input type="file" name="file" id="fileInput" accept="image/*" required />
      <label for="operation">Choose Operation:</label>
      <select name="operation" required>
        <option value="sketch" {% if selected_operation == "sketch" %}selected{% endif %}>Sketch</option>
        <option value="cartoon" {% if selected_operation == "cartoon" %}selected{% endif %}>Cartoon</option>
        <option value="color2bw" {% if selected_operation == "color2bw" %}selected{% endif %}>Color to B&W</option>
        <option value="bw2color" {% if selected_operation == "bw2color" %}selected{% endif %}>B&W to Fake Color</option>
      </select>
      <button type="submit">Convert</button>
    </form>

    <p id="fileName">No file chosen</p>

    {% if output_url %}
      <div class="output">
        <h2>Converted Image:</h2>
        <img src="{{ output_url }}" alt="Converted Image" />
        <br />
        <a href="{{ output_url }}" download>
          <button class="download-btn">Download Image</button>
        </a>
      </div>
    {% endif %}
  </div>

  <script>
    const fileInput = document.getElementById("fileInput");
    const fileName = document.getElementById("fileName");
    fileInput.addEventListener("change", () => {
      fileName.innerText = fileInput.files[0]?.name || "No file chosen";
    });
  </script>
</body>
</html>
